<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Artemisia L.</title>
    <!-- Add Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <!-- Add Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@400;700&family=Source+Sans+Pro:wght@300;400&display=swap');
        
        :root {
            --primary-green: #2E5E2A;
            --secondary-green: #5A8C45;
            --accent-gold: #B38E3D;
            --light-bg: #F8F9F7;
            --border-gray: #DEE2E6;
            --mother-border: #8B5A2B;
            
            /* IUCN Colors */
            --iucn-ex: #000000;
            --iucn-ew: #cc33ff;
            --iucn-cr: #ff3333;
            --iucn-en: #ff9933;
            --iucn-vu: #ffff33;
            --iucn-nt: #99cc33;
            --iucn-lc: #33cc33;
            --iucn-dd: #cccccc;
            --iucn-ne: #777777;
            --iucn-end: #ff3333; /* Endemic color */
            
            /* Granddaughter colors */
            --granddaughter-1: #E1F5FE;
            --granddaughter-2: #E8F5E9;
            --granddaughter-3: #FFF8E1;
            --granddaughter-4: #F3E5F5;
            --granddaughter-5: #FFEBEE;
            --granddaughter-border-1: #4FC3F7;
            --granddaughter-border-2: #81C784;
            --granddaughter-border-3: #FFD54F;
            --granddaughter-border-4: #BA68C8;
            --granddaughter-border-5: #EF5350;
        }
        
        body {
            font-family: 'Source Sans Pro', sans-serif;
            background-color: var(--light-bg);
            color: #212529;
            margin: 0;
            padding: 40px 20px;
            line-height: 1.6;
        }

        .header {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: linear-gradient(135deg, #2c3e50, #4ca1af);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 1000;
        }
        .header-title {
            font-size: 1.3rem;
            font-weight: 600;
            cursor: pointer;
        }
        .header-title:hover {
            text-decoration: underline;
        }
        
        .systematic-container {
            max-width: 1000px;
            margin: 0 auto;
            position: relative;
        }
        
        h1 {
            font-family: 'Libre Baskerville', serif;
            font-size: 2.8rem;
            text-align: center;
            color: var(--primary-green);
            margin-bottom: 50px;
            position: relative;
            padding-bottom: 15px;
        }
        
        h1::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--accent-gold), transparent);
        }
        
        /* Mother Box - Distinct Style */
        .genus-card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border: 2px solid var(--mother-border);
            padding: 35px;
            margin: 0 auto 50px;
            width: 85%;
            position: relative;
            transition: transform 0.3s;
        }
        
        .genus-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }
        
        /* Daughter Boxes - Distinct Style */
        .species-card {
            background: white;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border-left: 4px solid var(--secondary-green);
            padding: 25px;
            margin-left: 10%;
            margin-bottom: 30px;
            width: 80%;
            position: relative;
            transition: all 0.3s;
        }
        
        .species-card:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.12);
        }
        
        /* Granddaughter Boxes - Distinct Style */
        .subspecies-card {
            background: white;
            border-radius: 4px;
            box-shadow: 0 1px 4px rgba(0,0,0,0.05);
            padding: 20px;
            margin-left: 15%;
            margin-bottom: 20px;
            width: 80%;
            position: relative;
            transition: all 0.3s;
        }
        
        .subspecies-card.type-1 {
            background-color: var(--granddaughter-1);
            border-left: 4px solid var(--granddaughter-border-1);
        }
        
        .subspecies-card.type-2 {
            background-color: var(--granddaughter-2);
            border-left: 4px solid var(--granddaughter-border-2);
        }
        
        .subspecies-card.type-3 {
            background-color: var(--granddaughter-3);
            border-left: 4px solid var(--granddaughter-border-3);
        }
        
        .subspecies-card.type-4 {
            background-color: var(--granddaughter-4);
            border-left: 4px solid var(--granddaughter-border-4);
        }
        
        .subspecies-card.type-5 {
            background-color: var(--granddaughter-5);
            border-left: 4px solid var(--granddaughter-border-5);
        }
        
        .subspecies-card:hover {
            transform: translateX(3px);
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        }
        
        .taxon-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
        }
        
        .genus-card .taxon-header {
            border-bottom: 1px solid var(--mother-border);
        }
        
        .species-card .taxon-header {
            border-bottom: 1px dashed var(--border-gray);
        }
        
        .subspecies-card .taxon-header {
            border-bottom: 1px dotted var(--border-gray);
        }
        
        .taxon-title {
            font-family: 'Libre Baskerville', serif;
            color: var(--primary-green);
            margin: 0;
        }
        
        .genus-card .taxon-title {
            font-size: 1.8rem;
        }
        
        .species-card .taxon-title {
            font-size: 1.4rem;
        }
        
        .subspecies-card .taxon-title {
            font-size: 1.1rem;
        }
        
        .taxon-status {
            font-style: italic;
            font-size: 0.9rem;
            font-weight: 600;
            padding: 4px 10px;
            border-radius: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        /* IUCN Status Colors */
        .status-lc { background-color: var(--iucn-lc); color: #000; }
        .status-nt { background-color: var(--iucn-nt); color: #000; }
        .status-vu { background-color: var(--iucn-vu); color: #000; }
        .status-en { background-color: var(--iucn-en); color: #000; }
        .status-cr { background-color: var(--iucn-cr); color: white; }
        .status-ew { background-color: var(--iucn-ew); color: white; }
        .status-ex { background-color: var(--iucn-ex); color: white; }
        .status-dd { background-color: var(--iucn-dd); color: #000; }
        .status-ne { background-color: var(--iucn-ne); color: white; }
        .status-end { 
            background-color: white; 
            color: var(--iucn-end);
            border: 1px solid var(--iucn-end);
        }
        
        /* Economic Status Colors */
        .status-econ-1 { background-color: #5E35B1; color: white; }
        .status-econ-2 { background-color: #3949AB; color: white; }
        
        .taxon-node {
            position: absolute;
            left: -21px;
            top: 40px;
            width: 10px;
            height: 10px;
            background-color: white;
            border: 2px solid var(--secondary-green);
            border-radius: 50%;
            z-index: 2;
        }
        
        .taxon-node::after {
            content: "";
            position: absolute;
            width: 6px;
            height: 6px;
            background-color: var(--secondary-green);
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        .subspecies-node {
            position: absolute;
            left: -21px;
            top: 30px;
            width: 8px;
            height: 8px;
            background-color: white;
            border: 2px solid var(--secondary-green);
            border-radius: 50%;
            z-index: 2;
        }
        
        .subspecies-node::after {
            content: "";
            position: absolute;
            width: 4px;
            height: 4px;
            background-color: var(--secondary-green);
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        .view-illustration {
            display: inline-flex;
            align-items: center;
            color: var(--secondary-green);
            font-size: 0.9rem;
            margin-top: 20px;
            cursor: pointer;
            transition: color 0.2s;
        }
        
        .view-illustration::before {
            content: "\f06e";
            font-family: "Font Awesome 6 Free";
            font-weight: 900;
            margin-right: 8px;
            font-size: 0.9rem;
        }
        
        .view-illustration:hover {
            color: var(--primary-green);
            text-decoration: underline;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.9);
            overflow: auto;
        }
        
        .modal-content-container {
            margin: auto;
            display: block;
            width: 85%;
            max-width: 800px;
            position: relative;
            top: 50%;
            transform: translateY(-50%);
            animation: fadeIn 0.3s;
            text-align: center;
        }
        
        .modal-image {
            max-width: 100%;
            max-height: 70vh;
            display: block;
            margin: 0 auto;
        }
        
        .modal-caption {
            color: white;
            padding: 15px;
            font-size: 1rem;
            background-color: rgba(0, 0, 0, 0.7);
            border-radius: 5px;
            margin-top: 10px;
            max-width: 80%;
            margin-left: auto;
            margin-right: auto;
        }
        
        .modal-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-size: 2rem;
            cursor: pointer;
            padding: 15px;
            opacity: 0.7;
            transition: opacity 0.2s;
            z-index: 1001;
        }
        
        .modal-nav:hover {
            opacity: 1;
        }
        
        .modal-nav.prev {
            left: 20px;
        }
        
        .modal-nav.next {
            right: 20px;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .close {
            position: absolute;
            top: 30px;
            right: 40px;
            color: white;
            font-size: 35px;
            font-weight: bold;
            cursor: pointer;
            opacity: 0.8;
            transition: opacity 0.2s;
        }
        
        .close:hover {
            opacity: 1;
        }

        /* Map styles */
        .map-container {
            margin-top: 50px;
        }
        
        .map-title {
            font-family: 'Libre Baskerville', serif;
            font-size: 2rem;
            text-align: center;
            color: var(--primary-green);
            margin-bottom: 20px;
        }
        
        #distributionMap {
            height: 500px;
            width: 90%;
            margin: 0 auto;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border: 2px solid var(--mother-border);
        }
        
        .map-label {
            position: absolute;
            background: rgba(255, 255, 255, 0.9);
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 0.8rem;
            font-weight: bold;
            pointer-events: none;
            transform: translate(15px, -50%);
            white-space: nowrap;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
            border: 1px solid rgba(0,0,0,0.1);
        }
        
        /* Collapsible Species Filter Controls */
        .species-filter {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border-radius: 5px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            z-index: 1000;
            width: 200px;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .species-filter-header {
            padding: 10px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--primary-green);
            color: white;
        }
        
        .species-filter-header h4 {
            margin: 0;
            font-family: 'Libre Baskerville', serif;
            font-size: 0.9rem;
        }
        
        .species-filter-header i {
            transition: transform 0.3s;
        }
        
        .species-filter-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        
        .species-filter.expanded .species-filter-content {
            max-height: 400px;
            padding: 10px;
            overflow-y: auto;
        }
        
        .species-filter.expanded .species-filter-header i {
            transform: rotate(180deg);
        }
        
        .species-filter-item {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }
        
        .species-filter-item input {
            margin-right: 8px;
        }
        
        .species-filter-item label {
            font-size: 0.85rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            width: 100%;
        }
        
        .species-filter-item .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-left: auto;
        }
        
        /* Remark Box */
        .remark-box {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8eb 100%);
            border-radius: 8px;
            padding: 30px;
            margin: 50px auto;
            width: 85%;
            position: relative;
            border-left: 5px solid var(--accent-gold);
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        
        .remark-box::before {
            content: "\f06a";
            font-family: "Font Awesome 6 Free";
            font-weight: 900;
            position: absolute;
            left: 15px;
            top: 15px;
            color: var(--accent-gold);
            font-size: 1.5rem;
            opacity: 0.3;
        }
        
        .remark-title {
            font-family: 'Libre Baskerville', serif;
            color: var(--primary-green);
            margin-top: 0;
            margin-bottom: 15px;
            padding-left: 30px;
            font-size: 1.4rem;
        }
        
        .remark-content {
            padding-left: 30px;
            position: relative;
        }
        
        .remark-content p {
            margin-bottom: 15px;
        }
        
        .remark-content p:last-child {
            margin-bottom: 0;
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }
            
            .genus-card,
            .species-card {
                width: 100%;
                margin-left: 0;
            }
            
            .subspecies-card {
                margin-left: 5%;
                width: 90%;
            }
            
            .taxon-connector,
            .taxon-node,
            .subspecies-node {
                display: none;
            }
            
            #distributionMap {
                width: 100%;
                height: 400px;
            }
            
            .species-filter {
                top: 10px;
                right: 10px;
                width: 160px;
            }
            
            .species-filter.expanded .species-filter-content {
                max-height: 300px;
            }
            
            .remark-box {
                width: 100%;
                padding: 20px;
            }
		.local-name {
  font-style: italic;
  font-size: 0.9em;
  color: #666;
  margin-top: 2px;
}
        }
    </style>
</head>
<body>

<div class="header">
        <div class="header-title" onclick="window.location.href='../index.html'">FlorALG</div>
            </div>

    <div class="systematic-container">
        <h1><i>Artemisia</i> L.</h1>
        
        <div class="genus-card">
            <div class="taxon-header">
                <h2 class="taxon-title"><i>Artemisia</i> L.</h2>
            </div>
            <p>Capitules petits ou moyens, homogames ou hétérogames, discoïdes. Fleurs du disque hermaphrodites (fertiles ou stériles); celles du rayon femelles ou hermaphrodites. Involucre hémisphérique, ovoïde ou oblong; à bractées imbriquées et disposées sur peu de rangs, scarieuses sur les bords. Réceptacle plan ou convexe, glabre ou velu, non paléacé. Akènes homomorphes, obovés, chauves et lisses. Plantes odorantes vivaces, suffrutescentes ou ligneuses (pas d'annuelles dans dition).</p>
        </div>
        
                <div class="species-card">
            <div class="taxon-connector"></div>
            <div class="taxon-node"></div>
            <div class="taxon-header">
    		<div>
     		 <h2 class="taxon-title"><i>Artemisia herba-alba</i> Asso</h2>
      			<div class="local-name">Syn. Stirp. Aragon.: 117 (1779)</div>
			<div class="local-name"><i>Chih, Ifsi, Zezzaré</i></div>
    			</div>
<div>

                </div>
            </div>

            <p>Capitules pauciflores en général, homogames, à fleurs toutes hermaphrodites. Réceptacle nu. Corolle insérée très obliquement sur l'ovaire. Plante dressée, suffrutescente. Tiges nombreuses, tomenteuses, de 30-50 cm. Feuilles courtes, généralement pubescentes-argentées, pinnatipartites. Capitules sessiles ou subsessiles, généralement 2-5 flores (8-12 flores dans la var. <i>Saharae</i> (Pomel) Q. et S.). Bractées externes de l'involucre orbiculaires, opaques et pubescentes; les intérieures oblongues, brillantes et glanduleuses.</p>
		<span class="view-illustration" onclick="openModal('morphology', [
            {src: './img/d3.jpg', caption: 'Artemisia herba-alba (Fleurs)'},
            {src: './img/2d.jpg', caption: 'Quézel et Santa (1962), T2, p991.'},
        ])">Illustrations</span>
        </div>
                  
        <div class="species-card">
            <div class="taxon-connector"></div>
            <div class="taxon-node"></div>
            <div class="taxon-header">
    <div>
      <h2 class="taxon-title"><i>Artemisia absinthium</i> L.</h2>
      <div class="local-name">Sp. Pl.: 848 (1753)</div>
      <div class="local-name"><i>Chiha Coracani, Chedjret Meriem</i></div>
    </div>

            </div>
            <p>Capitules disposés en grappes unilatérales se groupant en panicule feuillée très ample et à rameaux étalés. Feuilles ponctuées et plus ou moins pubescentes, pétiolées et à pétiole non auriculé. Plante vivace de 40-70 cm, à tiges herbacées. Feuilles inférieures 2-pinnatiséquées; les supérieures 1-2 pinnatiséquées. Corolle glabre ou velue. Akènes non glanduleux.</p>
        </div>

        <div class="species-card">
            <div class="taxon-connector"></div>
            <div class="taxon-node"></div>
            <div class="taxon-header">
    <div>
      <h2 class="taxon-title"><i>Artemisia arborescens</i> L.</h2>
      <div class="local-name">Sp. Pl., ed. 2.: 1188 (1763)</div>
      <div class="local-name"><i>Chiba</i></div>
    </div>

            </div>
            <p>Capitules disposés en grappes unilatérales se groupant en panicule thyrsoïde feuillée, ample et à rameaux dressés et rapprochés. Feuilles non ponctuées, blanches-soyeuses, pétiolées à pétiole auriculé. Plante de 40-100 cm ou plus, à tiges ligneuses. Feuilles inférieures 3-pinnatiséquées; les supérieures 1-2 pinnatiséquées. Corolle glabre. Akènes glanduleux.</p>
        </div>

        <div class="species-card">
            <div class="taxon-connector"></div>
            <div class="taxon-node"></div>
            <div class="taxon-header">
    <div>
      <h2 class="taxon-title"><i>Artemisia judaica</i> L.</h2>
      <div class="local-name">Syst. Nat., ed. 10. 2: 1208 (1759)</div>
      <div class="local-name"><i>Teherégélé, Bahetseran</i></div>
    </div>

            </div>
            <p>Réceptacle glabre. Plante très odorante. Feuilles à lobes courts, larges et obtus. Inflorescences en panicules denses très ramifiées.</p>
        </div>
        
        <div class="species-card">
            <div class="taxon-connector"></div>
            <div class="taxon-node"></div>
            <div class="taxon-header">
    <div>
      <h2 class="taxon-title"><i>Artemisia atlantica</i> Coss. & Durieu</h2>
      <div class="local-name">Bull. Soc. Bot. France 9: 298 (1862)</div>
      <div class="local-name"><i>Chouaya</i></div>
    </div>

            </div>
            <p>Capitules disposés en longues grappes terminales généralement simples. Feuilles de 1-2 cm de long. Fleurons insérés très obliquement sur l'akène, très velus au sommet (au moins sur ceux qui sont hermaphrodites). Tiges suffrutescentes à la base, de 20-40 cm (var. <i>eu-atlantica</i> M.)</p>
		<span class="view-illustration" onclick="openModal('morphology', [
            {src: './img/A4.jpg', caption: 'Artemisia atlantica'}
        ])">Illustrations</span>
        </div>

        <div class="species-card">
            <div class="taxon-connector"></div>
            <div class="taxon-node"></div>
            <div class="taxon-header">
    <div>
      <h2 class="taxon-title"><i>Artemisia alba</i> Turra</h2>
      <div class="local-name">Giorn. Italia Sci. Nat. 1: 144 (1764)</div>
    </div>

            </div>
            <p>Capitules solitaires à l'extrémité de rameaux axillaires grêles et longs de 3-4 cm. Feuilles de 2-4 cm de long. Fleurons presque tous insérés au sommet de l'akène, glabres.</p>
        </div>

        <div class="species-card">
            <div class="taxon-connector"></div>
            <div class="taxon-node"></div>
            <div class="taxon-header">
    <div>
      <h2 class="taxon-title"><i>Artemisia kabylica</i> Chabert</h2>
      <div class="local-name">Bull. Soc. Bot. France 36: 27 (1889)</div>
    </div>
                    <span class="taxon-status status-end">END</span>
            </div>
            <p>Sous-arbrisseau odorant, à tige ligneuse, glabre, dressée, droite, très rameuse, de 80 à 90 centimètres de hauteur, aux rameaux touffus, dressés, rigides, simples, striés, légèrement pubescents, feuillés ; feuilles longuement pétiolées, jeunes couvertes d’un léger duvet grisâtre, adultes devenant glabres et vertes ; pétiole auriculé ; limbe à contour ovale : chez les feuilles inférieures bipenné, chez les supérieures pinnatiséqué ; segments linéaires, obtus ; feuilles terminales entières, linéaires. Capitules solitaires, petits, hémisphériques, longuement pédonculés, situés à l’extrémité de pédoncules dressés et rigides, émergeant de l’aisselle des feuilles, généralement au nombre de 1 (très rarement 2), accompagnés de 2 à 5 bractées linéaires ; capitules penchés, larges de 6 à 7 mm, comptant 30 à 40 fleurs, disposés en longues grappes spiciformes terminales. Ecailles extérieures de l’involucre vert grisâtre, lancéolées, herbacées, à sommet scarieux ; écailles intérieures arrondies, largement scarieuses au sommet et sur les bords, verdâtres sur le dos ou complètement scarieuses. Réceptacle nu ; corolles jaunes, glabres. Graines non observées. Floraison en juillet.</p>
        </div>

        <div class="species-card">
            <div class="taxon-connector"></div>
            <div class="taxon-node"></div>
            <div class="taxon-header">
    <div>
      <h2 class="taxon-title"><i>Artemisia campestris</i> L.</h2>
      <div class="local-name">Sp. Pl.: 846 (1753)</div>
      <div class="local-name"><i>Degoufet, Alala, Tedjok</i></div>
    </div>
  
            </div>
            <p>Fleurons du disque stériles (ovaire avorté). Plante de 30-150 cm, à rameaux constituant une panicule plus ou moins ample. Tige ligneuse à la base; striée. Feuilles glabrescentes, vert foncé; les inférieures 2-pinnatiséquées, les supérieures pinnatiséquées, les basales pétiolées et auriculées, les autres sessiles ou subsessiles, dressées ou pendantes.</p>
        
 <!-- Granddaughter boxes -->
            <div class="subspecies-card type-1">
                <div class="subspecies-node"></div>
  <div class="taxon-header">
    <div>
      <h2 class="taxon-title"><i>Artemisia campestris</i> subsp. <i>campestris</i></h2>
    </div>
                </div>
                <p>Tiges ascendantes, à rameaux de l'inflorescence non visqueux. Capitules de forme variable, à bractées de l'involucre non visqueuses.</p>
            </div>
            
            <div class="subspecies-card type-2">
                <div class="subspecies-node"></div>
  <div class="taxon-header">
    <div>
      <h2 class="taxon-title"><i>Artemisia campestris</i> subsp. <i>glutinosa</i> (J.Gay ex Besser) Batt.</h2>
    </div>
                </div>
                <p>Tiges dressées dès la base, plus nettement frutescentes inférieurement, à rameaux de l'inflorescence visqueux. Capitules allongés ou ellipsoïdaux, à bractées involucrales visqueuses.</p>
            </div>


</div>

        <div class="species-card">
            <div class="taxon-connector"></div>
            <div class="taxon-node"></div>
            <div class="taxon-header">
    <div>
      <h2 class="taxon-title"><i>Artemisia algeriensis</i> Filatova</h2>
      <div class="local-name">Novosti Sist. Vyssh. Rast. 22: 222 (1985)</div>
    </div>
<span class="taxon-status status-end">END</span>
            </div>
            <p></p>
        </div>


        <div class="species-card">
            <div class="taxon-connector"></div>
            <div class="taxon-node"></div>
            <div class="taxon-header">
    <div>
      <h2 class="taxon-title"><i>Artemisia verlotiorum</i> Lamotte</h2>
      <div class="local-name">Mém. Assoc. Franç. Cong. Clermont-Ferrant 1876: 511 (1876)</div>
      <div class="local-name"><i>Bou ndjassq</i></div>
    </div>

            </div>
            <p>Corolles rougeâtres, non glanduleuses. Feuilles toutes à lobes étroits, linéaires et entiers. Racines traçantes. Plantes à odeur aromatique.</p>
		<span class="view-illustration" onclick="openModal('morphology', [
            {src: './img/2bdaa.jpg', caption: 'Quézel et Santa (1962), T2, p991.'}
        ])">Illustrations</span>
        </div>
        
        <div class="species-card">
            <div class="taxon-connector"></div>
            <div class="taxon-node"></div>
            <div class="taxon-header">
    <div>
      <h2 class="taxon-title"><i>Artemisia vulgaris</i> L.</h2>
      <div class="local-name">Sp. Pl.: 848 (1753)</div>
    </div>

            </div>
            <p>Corolles jaunâtres, glanduleuses. Feuilles inférieures et moyennes à lobes ovales, incisés-dentés. Plante cespiteuse, légèrement odorante, à grosse tige striée, anguleuse et rameuse. Feuilles blanches-tomenteuses en dessous et glabres ou légèrement soyeuses en dessus. Capitules en grappes constituant une panicule pyramidale.</p>
        </div>
        
        <!-- Distribution Map Section -->
        <div class="map-container">
            <h2 class="map-title">Distribution des espèces d'<i>Artemisia</i></h2>
            <div id="distributionMap">
                <div class="species-filter">
                    <div class="species-filter-header" onclick="toggleFilterPanel()">
                        <h4>Filtrer les Espèces</h4>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="species-filter-content" id="speciesFilterList"></div>
                </div>
            </div>
        </div>
        
    
    <div id="imageModal" class="modal">
        <span class="close" onclick="closeModal()">&times;</span>
        <div class="modal-nav prev" onclick="navigateModal(-1)"><i class="fas fa-chevron-left"></i></div>
        <div class="modal-nav next" onclick="navigateModal(1)"><i class="fas fa-chevron-right"></i></div>
        <div class="modal-content-container">
            <img class="modal-image" id="modalImage">
            <div class="modal-caption" id="modalCaption"></div>
        </div>
    </div>
    
    <!-- Add Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script>
        // Modal variables
        let currentModalImages = [];
        let currentModalIndex = 0;
        
        // Map variables
        let map;
        let speciesGroups = {}; // To store all markers for each species
        let speciesLabels = {}; // To store all labels for each species
        let speciesColors = {}; // To store color for each species
        
        function openModal(imageName, images = []) {
            const modal = document.getElementById('imageModal');
            const modalImg = document.getElementById('modalImage');
            const modalCaption = document.getElementById('modalCaption');
            
            currentModalImages = images;
            currentModalIndex = 0;
            
            modalImg.src = currentModalImages[currentModalIndex].src;
            modalImg.alt = `${imageName} diagram`;
            modalCaption.textContent = currentModalImages[currentModalIndex].caption;
            
            modal.style.display = "block";
            
            modal.onclick = function(event) {
                if (event.target === modal) {
                    closeModal();
                }
            };
        }
        
        function navigateModal(direction) {
            event.stopPropagation();
            currentModalIndex = (currentModalIndex + direction + currentModalImages.length) % currentModalImages.length;
            const modalImg = document.getElementById('modalImage');
            const modalCaption = document.getElementById('modalCaption');
            
            modalImg.src = currentModalImages[currentModalIndex].src;
            modalCaption.textContent = currentModalImages[currentModalIndex].caption;
        }
        
        function closeModal() {
            document.getElementById('imageModal').style.display = "none";
        }
        
        function toggleSpeciesVisibility(speciesId, isChecked) {
            // Toggle all markers for this species
            speciesGroups[speciesId].forEach(marker => {
                marker.setStyle({
                    opacity: isChecked ? 1 : 0,
                    fillOpacity: isChecked ? 0.8 : 0
                });
            });
            
            // Toggle all labels for this species
            speciesLabels[speciesId].forEach(label => {
                label.setOpacity(isChecked ? 1 : 0);
            });
        }
        
        function toggleFilterPanel() {
            const filter = document.querySelector('.species-filter');
            filter.classList.toggle('expanded');
        }
        
        document.addEventListener('keydown', function(event) {
            if (event.key === "Escape") {
                closeModal();
            } else if (event.key === "ArrowLeft") {
                navigateModal(-1);
            } else if (event.key === "ArrowRight") {
                navigateModal(1);
            }
        });
        
        document.addEventListener('DOMContentLoaded', function() {
            const cards = document.querySelectorAll('.genus-card, .species-card, .subspecies-card');
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, { threshold: 0.1 });
            
            cards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                card.style.transition = `all 0.5s ease ${index * 0.1}s`;
                observer.observe(card);
            });

            // Initialize the map
            map = L.map('distributionMap').setView([28.5339, 1.6596], 5);
            
            // Add tile layer (OpenStreetMap)
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributeurs'
            }).addTo(map);
            
            // Color palette for markers
            const colors = [
                '#2E5E2A', '#5A8C45', '#B38E3D', '#8B5A2B', '#4CA1AF',
                '#2C3E50', '#8E44AD', '#E74C3C', '#3498DB', '#1ABC9C',
                '#D35400', '#27AE60', '#F39C12', '#9B59B6', '#E91E63',
                '#16A085', '#C0392B', '#2980B9', '#F1C40F', '#7F8C8D'
            ];
            
            // Sample data points for Ferula species distribution
            // Each species can have multiple points
            const speciesData = [
                { id: 'herba-alba', name: "A. herba-alba", points: [
                    { lat: 35.9, lng: 4.6 },                    
		    { lat: 31.2, lng: -3.2 },
                    { lat: 36.4, lng: 4.4 },
                    { lat: 34.2, lng: 1.3 },
                    { lat: 35.0, lng: 6.0 },
                    { lat: 34.3, lng: 2.0 },
                    { lat: 35.1, lng: 8.3 },
                    { lat: 36.0, lng: 8.1 }
                ]},
                { id: 'absinthium', name: "A. absinthium", points: [
                    { lat: 36.6, lng: 4.1 },                    
		    { lat: 36.9, lng: 6.9 },
                    { lat: 36.7, lng: 3.1 }
                ]},
                { id: 'arborescens', name: "A. arborescens", points: [
                    { lat: 36.3, lng: 3.3 }                   
                ]},
                { id: 'judaica', name: "A. judaica", points: [
                    { lat: 24.6, lng: 9.5 },                    
		    { lat: 25.8, lng: 8.1 },
                    { lat: 22.5, lng: 5.5 },
                    { lat: 23.7, lng: 5.4 },
                    { lat: 24.0, lng: 5.6 },
                    { lat: 29.9, lng: 4.0 }
                ]},
                { id: 'atlantica', name: "A. atlantica", points: [
                    { lat: 34.3, lng: 1.9 },                    
		    { lat: 35.6, lng: 6.2 },
                    { lat: 34.7, lng: 3.1 },
                    { lat: 33.6, lng: 1.2 }
                ]},
                { id: 'alba', name: "A. alba", points: [
                    { lat: 35.6, lng: -0.6 },                    
		    { lat: 34.9, lng: 5.6 }
                ]},
                { id: 'kabylica', name: "A. kabylica", points: [
                    { lat: 36.6, lng: 4.3 }                   
                ]},
                { id: 'campestris', name: "A. campestris", points: [
                    { lat: 35.8, lng: 7.4 },                    
		    { lat: 22.8, lng: 5.5 },
                    { lat: 34.5, lng: 3.5 },
                    { lat: 23.2, lng: 5.7 },
                    { lat: 35.2, lng: 6.3 },
                    { lat: 24.8, lng: 9.1 }
                ]},
                { id: 'algeriensis', name: "A. algeriensis", points: [
                    { lat: 34.6, lng: 3.3 }                   
                ]},
                { id: 'verlotiorum', name: "A. verlotiorum", points: [
                    { lat: 35.5, lng: -0.75 },                    
		    { lat: 35.01, lng: -1.53 }
                ]},
                { id: 'vulgaris', name: "A. vulgaris", points: [
                    { lat: 36.57, lng: 2.95 }                   
                ]}
            ];
            
            // Create filter controls
            const filterList = document.getElementById('speciesFilterList');
            
            speciesData.forEach((species, index) => {
                const color = colors[index % colors.length];
                speciesColors[species.id] = color; // Store color for this species
                
                // Initialize arrays for this species
                speciesGroups[species.id] = [];
                speciesLabels[species.id] = [];
                
                // Add all points for this species
                species.points.forEach(point => {
                    // Add marker
                    const marker = L.circleMarker([point.lat, point.lng], {
                        radius: 10,
                        fillColor: color,
                        color: '#fff',
                        weight: 1.5,
                        opacity: 1,
                        fillOpacity: 0.8
                    }).addTo(map);
                    
                    // Add label (only show for one point per species to avoid clutter)
                    if (species.points.indexOf(point) === 0) {
                        const label = L.marker([point.lat, point.lng], {
                            icon: L.divIcon({
                                className: 'map-label',
                                html: species.name,
                                iconSize: null
                            }),
                            interactive: false
                        }).addTo(map);
                        speciesLabels[species.id].push(label);
                    }
                    
                    speciesGroups[species.id].push(marker);
                });
                
                // Add filter checkbox (only one per species)
                const filterItem = document.createElement('div');
                filterItem.className = 'species-filter-item';
                filterItem.innerHTML = `
                    <input type="checkbox" id="filter-${species.id}" checked onchange="toggleSpeciesVisibility('${species.id}', this.checked)">
                    <label for="filter-${species.id}">
                        ${species.name}
                        <span class="status-indicator" style="background-color: ${color}"></span>
                    </label>
                `;
                filterList.appendChild(filterItem);
            });
        });
        
        // Make functions available globally
        window.toggleSpeciesVisibility = toggleSpeciesVisibility;
        window.toggleFilterPanel = toggleFilterPanel;
    </script>
</body>
</html>
